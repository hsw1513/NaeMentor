<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.min.naementor.report">

<resultMap type="com.min.naementor.dtos.NaememberDto" id="joinsearchReportU">
		<result property="singomember" column="SINGOMEMBER"/>
		<result property="singoedmember" column="SINGOEDMEMBER"/>
		<result property="singoreason" column="SINGOREASON"/>
		<result property="singochk" column="SINGOCHK"/>
		<result property="reviewseq" column="REVIEWSEQ"/>
		<result property="reviewdto.boardseq" column="BOARDSEQ"/>
		<result property="reviewdto.content" column="CONTENT"/>
		<result property="reviewdto.writedate" column="WRITEDATE"/>
		<result property="reviewdto.delflag" column="DELFLAG"/>
	</resultMap>
	
<!-- 신고당한 회원 조회 -->
<select id="searchReportU" resultMap="joinsearchReportU">
SELECT SINGOMEMBER , SINGOEDMEMBER , SINGOREASON , SINGOCHK , r.REVIEWSEQ , r.BOARDSEQ 
		, CONTENT, WRITEDATE, DELFLAG, 
		(SELECT MENTORINGPLACE FROM MEMBERSCHEDULE m2 WHERE r2.BOARDSEQ =m2.BOARDSEQ), 
		TO_CHAR((SELECT MENTORINGTIME FROM MEMBERSCHEDULE m WHERE r2.BOARDSEQ = m.BOARDSEQ),'YYYY-MM-DD')
	FROM REPORT r JOIN REVIEW r2 
		ON r.REVIEWSEQ = r2.REVIEWSEQ
			WHERE r2.BOARDSEQ = #{boardseq}
</select>

<!-- 신고당한 회원 카운트 증가 -->
<update id="addReportCnt" parameterType="java.util.Map">
UPDATE NAEMEMBER 
			SET REPORTCNT = REPORTCNT +1
				WHERE MEMBERSEQ = #{memberseq}
</update>

<!-- 페이징 -->


</mapper>
